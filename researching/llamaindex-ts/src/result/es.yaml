bounded_context: UserAccountManagement

elements:
  # Initial Login Flow
  - id: user_submitted_credentials
    type: Event
    name: "User Submitted Login Credentials"
    connections:
      - to: validate_credentials_policy

  - id: validate_credentials_policy
    type: Policy
    name: "Validate User Credentials Policy"
    description: "Check email format, password strength, and user status"
    connections: [validate_user_command]
    related_elements: [user_credentials_read_model]

  - id: user_credentials_read_model
    type: ReadModel
    name: "User Credentials View"
    description: "Display login form with email and password fields"

  - id: validate_user_command
    type: Command
    name: "Validate User Credentials"
    connections: [user_aggregate]
    related_elements: [user_actor]

  - id: user_actor
    type: Actor
    name: "Registered User"

  - id: user_aggregate
    type: Aggregate
    name: "User Account"
    connections: [user_authenticated, authentication_failed]

  # Successful Authentication Path
  - id: user_authenticated
    type: Event
    name: "User Successfully Authenticated"
    connections: [create_session_policy]

  - id: create_session_policy
    type: Policy
    name: "Create User Session Policy"
    description: "Establish secure session for authenticated user"
    connections: [create_session_command]

  - id: create_session_command
    type: Command
    name: "Create User Session"
    connections: [session_aggregate]

  - id: session_aggregate
    type: Aggregate
    name: "User Session"
    connections: [session_created]

  - id: session_created
    type: Event
    name: "User Session Created"
    connections: [redirect_to_dashboard_policy]

  - id: redirect_to_dashboard_policy
    type: Policy
    name: "Redirect to Dashboard Policy"
    description: "Navigate authenticated user to dashboard"
    connections: [redirect_user_command]

  - id: redirect_user_command
    type: Command
    name: "Redirect to Dashboard"
    connections: [navigation_system]

  - id: navigation_system
    type: ExternalSystem
    name: "Navigation System"
    connections: [user_redirected_to_dashboard]

  - id: user_redirected_to_dashboard
    type: Event
    name: "User Redirected to Dashboard"
    connections: [display_welcome_message_policy]

  - id: display_welcome_message_policy
    type: Policy
    name: "Display Welcome Message Policy"
    connections: [show_welcome_command]

  - id: show_welcome_command
    type: Command
    name: "Show Welcome Message"

  # Authentication Failure Path
  - id: authentication_failed
    type: Event
    name: "Authentication Failed"
    connections: [show_error_policy]

  - id: show_error_policy
    type: Policy
    name: "Show Authentication Error Policy"
    connections: [display_error_command]

  - id: display_error_command
    type: Command
    name: "Display Error Message"
