meta:
  name: "Login and Preferences"
  version: "1.0"

actors:
  - id: A.User
    name: "User"
    targets: [C.SubmitLogin]

read_models:
  - id: RM.LoginPage
    name: "Login Page"
    targets: ["A.User"]
  - id: RM.Dashboard
    name: "Dashboard"

commands:
  - id: C.SubmitLogin
    name: "Submit Login"
    targets: [P.SessionPolicy]

policies:
  - id: P.SessionPolicy
    name: "Session Management Policy"
    targets: [E.LoginAttempted]
  - id: P.OnSuccessNavigate
    name: "On Success"
    targets: [E.LoginSucceeded]
  - id: P.OnFailureShowError
    name: "On Failure"
    targets: [E.LoginFailed]

events:
  - id: E.LoginAttempted
    name: "Login Attempted"
    targets: [P.OnSuccessNavigate, P.OnFailureShowError]
  - id: E.LoginSucceeded
    name: "Login Succeeded"
    targets: [RM.Dashboard]
  - id: E.LoginFailed
    name: "Login Failed"
    targets: [RM.LoginPage]

external_systems: []
