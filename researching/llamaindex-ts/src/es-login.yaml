meta:
  name: "Login and Preferences"
  version: "1.0"

actors:
  - id: A.User
    name: "User"

read_models:
  - id: RM.LoginPage
    name: "Login Page"
  - id: RM.Dashboard
    name: "Dashboard"

commands:
  - id: C.SubmitLogin
    name: "Submit Login"

policies:
  - id: P.SessionPolicy
    name: "Session Management Policy"
  - id: P.OnSuccessNavigate
    name: "On Success"
  - id: P.OnFailureShowError
    name: "On Failure"

events:
  - id: E.LoginAttempted
    name: "Login Attempted"
  - id: E.LoginSucceeded
    name: "Login Succeeded"
  - id: E.LoginFailed
    name: "Login Failed"

external_systems: []

flows:
  - source_id: A.User
    target_id: C.SubmitLogin
  - source_id: C.SubmitLogin
    target_id: P.SessionPolicy
  - source_id: P.SessionPolicy
    target_id: E.LoginAttempted
  - source_id: E.LoginAttempted
    target_id: [P.OnSuccessNavigate, P.OnFailureShowError]
  - source_id: P.OnSuccessNavigate
    target_id: E.LoginSucceeded
  - source_id: E.LoginSucceeded
    target_id: RM.Dashboard
  - source_id: P.OnFailureShowError
    target_id: E.LoginFailed
  - source_id: E.LoginFailed
    target_id: RM.LoginPage
